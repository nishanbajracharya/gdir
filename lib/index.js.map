{"version":3,"file":"index.js","sources":["../index.js"],"sourcesContent":["#! /usr/bin/env node\n\nconst chalk = require('chalk');\nconst Table = require('cli-table');\nconst { program, Option } = require('commander');\n\nconst pkg = require('./package.json');\n\nconst { getStatus, getCurrentBranch, isBranch } = require('./git');\nconst {\n  hasDirectory,\n  getDirectories,\n  getDirectoryNameFromPath,\n} = require('./dir');\n\nconst GIT_DIR = '.git';\n\ntry {\n  program\n    .version(pkg.version)\n    .option('-p, --path <value>', 'Path of directory to check repos in', '.')\n    .option('-b, --branch <value>', 'Git branch to filter', '')\n    .addOption(\n      new Option('-t, --type <value>', 'Show current branch or status')\n        .choices(['branch', 'status'])\n        .default('branch')\n    )\n    .parse();\n\n  const options = program.opts();\n\n  program\n    .arguments('[path] [branch]')\n    .description('Arguments', {\n      path: 'Path of directory to check repos in',\n      branch: 'Git branch to filter',\n      type: 'Show current branch or status',\n    })\n    .action((path, branch) => {\n      if (path) {\n        options.path = path;\n      }\n\n      if (branch) {\n        options.branch = branch;\n      }\n    })\n    .parse();\n\n  const directories = getDirectories(options.path);\n\n  const gitDirectories = directories.filter((dir) =>\n    hasDirectory(dir, GIT_DIR)\n  );\n\n  const filteredDirectories = gitDirectories.filter((dir) =>\n    isBranch(dir, options.branch)\n  );\n\n  function display(type) {\n    const table = new Table();\n\n    filteredDirectories.forEach((dir) =>\n      table.push([\n        chalk.bold.green(getDirectoryNameFromPath(dir)),\n        type === 'status' ? getStatus(dir) : getCurrentBranch(dir),\n      ])\n    );\n\n    console.log(table.toString());\n  }\n\n  display(options.type);\n} catch (e) {\n  console.log(\n    chalk.bold.redBright('An error occured! Make sure your path is correct.')\n  );\n\n  const table = new Table();\n\n  table.push([e.message]);\n  console.log(table.toString());\n}\n"],"names":["chalk","require","Table","program","Option","pkg","getStatus","getCurrentBranch","isBranch","hasDirectory","getDirectories","getDirectoryNameFromPath","version","option","addOption","choices","parse","options","opts","arguments","description","path","branch","type","action","filteredDirectories","filter","dir","table","forEach","push","bold","green","console","log","toString","display","e","redBright","message"],"mappings":";AAEA,IAAMA,EAAQC,QAAQ,SAChBC,EAAQD,QAAQ,eACMA,QAAQ,aAA5BE,IAAAA,QAASC,IAAAA,OAEXC,EAAMJ,QAAQ,oBAE8BA,QAAQ,SAAlDK,IAAAA,UAAWC,IAAAA,iBAAkBC,IAAAA,WAKjCP,QAAQ,SAHVQ,IAAAA,aACAC,IAAAA,eACAC,IAAAA,yBAKF,IACER,EACGS,QAAQP,EAAIO,SACZC,OAAO,qBAAsB,sCAAuC,KACpEA,OAAO,uBAAwB,uBAAwB,IACvDC,UACC,IAAIV,EAAO,qBAAsB,iCAC9BW,QAAQ,CAAC,SAAU,mBACX,WAEZC,QAEH,IAAMC,EAAUd,EAAQe,OAExBf,EACGgB,UAAU,mBACVC,YAAY,YAAa,CACxBC,KAAM,sCACNC,OAAQ,uBACRC,KAAM,kCAEPC,OAAO,SAACH,EAAMC,GACTD,IACFJ,EAAQI,KAAOA,GAGbC,IACFL,EAAQK,OAASA,KAGpBN,QAEH,IAMMS,EANcf,EAAeO,EAAQI,MAERK,OAAO,SAACC,UACzClB,EAAakB,EArCD,UAwC6BD,OAAO,SAACC,UACjDnB,EAASmB,EAAKV,EAAQK,WAGxB,SAAiBC,GACf,IAAMK,EAAQ,IAAI1B,EAElBuB,EAAoBI,QAAQ,SAACF,UAC3BC,EAAME,KAAK,CACT9B,EAAM+B,KAAKC,MAAMrB,EAAyBgB,IACjC,WAATJ,EAAoBjB,EAAUqB,GAAOpB,EAAiBoB,OAI1DM,QAAQC,IAAIN,EAAMO,YAGpBC,CAAQnB,EAAQM,MAChB,MAAOc,GACPJ,QAAQC,IACNlC,EAAM+B,KAAKO,UAAU,sDAGvB,IAAMV,EAAQ,IAAI1B,EAElB0B,EAAME,KAAK,CAACO,EAAEE,UACdN,QAAQC,IAAIN,EAAMO"}